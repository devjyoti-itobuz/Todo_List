<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/png" href="./assets/logo.png" />
    <title>Todo</title>
    <script type="module" src="./js/main.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
  </head>
  <body class="bg-ligt">
    <div class="toastSection" id="toastSection"></div>

    <div class="vh-100 p-lg-5 p-md-2">
      <div class="card shadow h-100 d-flex flex-column">
        <div class="card-body d-flex flex-column">
          <div
            class="d-flex align-items-center justify-content-between pt-lg-3 mb-4"
          >
            <div class="dropdown">
              <button
                class="btn btn-outline-dark rounded-circle profileDropdown"
                id="profileDropdown"
                title="Profile"
              >
                <i class="fas fa-user"></i>
              </button>
              <ul
                class="dropdown-menu dropdown-menu-start"
                id="profileMenu"
                style="display: none"
              >
                <!-- <li>
                  <span
                    class="dropdown-item-text fw-bold text-secondary"
                    id="userEmail"
                  >
                    <%= user.email %>
                  </span>
                </li>
                <li><hr class="dropdown-divider" /></li> -->
                <li>
                  <a
                    class="dropdown-item"
                    href="#"
                    data-bs-toggle="modal"
                    data-bs-target="#resetPasswordModal"
                  >
                    <i class="fas fa-key"></i> Reset Password
                  </a>
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a class="dropdown-item text-danger" href="#" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                  </a>
                </li>
              </ul>
            </div>

            <h2 class="card-title text-center fw-semibold mb-0 flex-grow-1">
              <i class="fa-regular fa-pen-to-square"></i> To Do List
            </h2>

            <!-- <button
              class="btn btn-outline-dark"
              id="addTaskBtn"
              title="Quick Add"
            >
              <i class="fas fa-plus"></i>
            </button> -->
          </div>

          <div
            class="row align-items-center justify-content-around mb-2 mb-lg-3 g-2"
          >
            <div class="col-lg-3">
              <div class="btn-group w-100" id="filterButtons">
                <button
                  type="button"
                  class="btn btn-outline-dark active"
                  data-filter="all"
                >
                  All
                </button>
                <button
                  type="button"
                  class="btn btn-outline-dark"
                  data-filter="completed"
                >
                  Completed
                </button>
                <button
                  type="button"
                  class="btn btn-outline-dark"
                  data-filter="pending"
                >
                  Pending
                </button>
              </div>
            </div>

            <div class="col-12 col-lg-5 col-xl-6">
              <div class="input-group">
                <input
                  type="text"
                  id="searchInput"
                  class="form-control searchInput"
                  placeholder="Search tasks, tags..."
                />
                <span class="input-group-text bg-dark text-white">
                  <i class="fas fa-magnifying-glass"></i>
                </span>
              </div>
            </div>

            <div class="col-xl-3 col-lg-3">
              <div class="btn-group w-100" id="priorityFilterButtons">
                <button
                  type="button"
                  class="btn btn-outline-dark active"
                  data-filter="all"
                >
                  All
                </button>
                <button
                  type="button"
                  class="btn btn-outline-dark"
                  data-filter="low"
                >
                  Low
                </button>
                <button
                  type="button"
                  class="btn btn-outline-dark"
                  data-filter="medium"
                >
                  Medium
                </button>
                <button
                  type="button"
                  class="btn btn-outline-dark"
                  data-filter="high"
                >
                  High
                </button>
              </div>
            </div>
          </div>

          <div id="queryModal" class="queryModal">Validation message here</div>

          <div class="row g-2 mb-4 align-items-start">
            <form id="taskForm" class="row g-2 col-12 col-md-10 m-0 p-0">
              <div class="col-12 col-sm-6 col-md-4 col-lg-6">
                <input
                  type="text"
                  id="taskInput"
                  class="form-control"
                  placeholder="Enter task to be added..."
                />
              </div>

              <div class="col-6 col-md-3 col-lg-2">
                <select id="prioritySelect" class="form-select">
                  <option value="" selected disabled hidden>
                    Select priority...
                  </option>
                  <option value="Low">Low</option>
                  <option value="Medium">Medium</option>
                  <option value="High">High</option>
                </select>
              </div>

              <div class="col-6 col-md-3 col-lg-3">
                <input
                  type="text"
                  id="tagInput"
                  class="form-control"
                  placeholder="Tags (comma separated)"
                />
              </div>

              <div class="col-12 col-md-2 col-lg-1 d-grid">
                <button type="submit" class="btn btn-outline-dark">
                  <i class="fa-solid fa-plus"></i>
                </button>
              </div>
            </form>

            <div class="col-12 col-md-2 col-lg-2 d-grid">
              <button class="btn btn-dark" id="clearAllBtn">Clear All</button>
            </div>
          </div>

          <div class="bg-lgt rounded-2 p-2 d-flex flex-column flex-grow-1">
            <ul id="taskList" class="list-group flex-grow-1 overflow-auto"></ul>
          </div>
        </div>
      </div>
    </div>
    <div id="deleteModal" class="custom-modal fade">
      <div class="custom-modal-content">
        <p>Are you sure you want to delete?</p>
        <button id="confirmBtn" class="btn btn-dark">Delete</button>
        <button id="cancelBtn" class="btn btn-secondary">Cancel</button>
      </div>
    </div>

    <div id="qModal" class="qModal">Validation message here</div>

    <div
      class="modal fade"
      id="editModal"
      tabindex="-1"
      aria-labelledby="editModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="editModalLabel fw-semibold">
              Edit Task
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="bg-ligt modal-body">
            <form id="editTaskForm">
              <div class="mb-3">
                <label for="editTaskInput" class="form-label">Task</label>
                <input type="text" class="form-control" id="editTaskInput" />
              </div>
              <div class="mb-3">
                <label for="editPrioritySelect" class="form-label"
                  >Priority</label
                >
                <select class="form-select" id="editPrioritySelect">
                  <option value="High">High</option>
                  <option value="Medium">Medium</option>
                  <option value="Low">Low</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="editTagInput" class="form-label"
                  >Tags (comma-separated)</label
                >
                <input type="text" class="form-control" id="editTagInput" />
              </div>

              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Cancel
                </button>
                <button type="button" class="btn btn-dark" id="saveEditBtn">
                  Save Changes
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="resetPasswordModal"
      tabindex="-1"
      aria-labelledby="resetPasswordLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title fw-semibold" id="resetPasswordLabel">
              <i class="fas fa-key"></i> Reset Password
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body bg-ligt">
            <form id="resetPasswordForm">
              <div class="mb-3">
                <label for="resetCurrentPassword" class="form-label"
                  >Current Password</label
                >
                <div class="input-group">
                  <input
                    type="password"
                    class="form-control"
                    id="resetCurrentPassword"
                    placeholder="Enter your password"
                    required
                  />
                  <span
                    class="input-group-text bg-dark text-white"
                    style="cursor: pointer"
                    id="togglePassword"
                  >
                    <i class="fas fa-eye"></i>
                  </span>
                </div>
              </div>
              <div class="mb-3">
                <label for="resetNewPassword" class="form-label"
                  >New Password</label
                >
                <div class="input-group">
                  <input
                    type="password"
                    class="form-control"
                    id="resetNewPassword"
                    placeholder="Enter your password"
                    required
                  />
                  <span
                    class="input-group-text bg-dark text-white"
                    style="cursor: pointer"
                    id="togglePasswords"
                  >
                    <i class="fas fa-eye"></i>
                  </span>
                </div>
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Cancel
                </button>
                <button
                  type="submit"
                  class="btn btn-dark"
                  id="submitResetPassword"
                >
                  Reset Password
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
